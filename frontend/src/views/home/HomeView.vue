<template>
  <div v-if="!isLoggedIn">
    <!-- Hero Section -->
    <header class="hero">
      <div class="hero-overlay text-center">
        <div class="container">
          <h1 class="display-4 fw-bold">ë‹¹ì‹ ë§Œì„ ìœ„í•œ ì‹ë‹¨ ì½”ì¹˜</h1>
          <p class="lead mt-3 mb-4">ì¬ë¯¸ìˆëŠ” ì„¤ë¬¸ì„ í†µí•´ ë‚˜ì—ê²Œ ê¼­ ë§ëŠ” ì‹ìŠµê´€ì„ ì°¾ì•„ë³´ì„¸ìš”!</p>
          <router-link to="/login" class="btn btn-lg btn-success" v-if="username == ''"
            >ë¡œê·¸ì¸ í•˜ê¸°{{ username }}</router-link
          >
          <router-link
            to="/survey"
            class="btn btn-lg btn-success"
            v-if="username != '' && !isSurveyed"
            >ì§€ê¸ˆ ì„¤ë¬¸í•˜ê¸°</router-link
          >
        </div>
      </div>
    </header>

    <!-- Features Section -->
    <section class="py-5 bg-light">
      <div class="container">
        <h2 class="section-title text-center mb-5">ëƒ ëƒ ì½”ì¹˜ ê¸°ëŠ¥</h2>
        <div class="row text-center">
          <div class="col-md-4">
            <div class="mb-3 fs-1">ğŸ¥—</div>
            <h5>ê°œì¸ ë§ì¶¤í˜• ì‹ë‹¨</h5>
            <p>ì„¤ë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë‚˜ì˜ ê±´ê°• ìƒíƒœì— ë§ëŠ” ì‹ë‹¨ì„ ì¶”ì²œí•´ì¤ë‹ˆë‹¤.</p>
          </div>
          <div class="col-md-4">
            <div class="mb-3 fs-1">ğŸ“Š</div>
            <h5>ì‹ìŠµê´€ ë¶„ì„</h5>
            <p>í¥ë¯¸ë¡­ê²Œ ì‹ìŠµê´€ì„ ì§„ë‹¨í•˜ê³  ê²°ê³¼ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.</p>
          </div>
          <div class="col-md-4">
            <div class="mb-3 fs-1">ğŸ“…</div>
            <h5>ì¼ê°„/ì£¼ê°„ ê´€ë¦¬</h5>
            <p>ë‚˜ì˜ ì‹ë‹¨ì„ ìº˜ë¦°ë”ë¡œ ê´€ë¦¬í•˜ê³ , ì‰½ê²Œ ì‹¤ì²œí•  ìˆ˜ ìˆì–´ìš”.</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div v-else>
    <div class="d-flex pt-3 position-relative">
      <!-- â”€â”€â”€ ì‚¬ì´ë“œë°” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->

      <!-- â”€â”€â”€ ë©”ì¸ ì»¨í…ì¸  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <main class="flex-grow-1 overflow-auto p-4">
        <!-- ì¸ì‚¬+ë‚ ì§œ/ì‹œê°„ -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2 class="mb-0">
            ì•ˆë…•í•˜ì„¸ìš”, <strong>{{ username }}</strong
            >ë‹˜
          </h2>
        </div>
        <hr />

        <!-- ì°¨íŠ¸ + ì‚¬ì´ë“œ ì •ë³´ -->
        <div class="row">
          <!-- 1í–‰ 1ì—´: TodayDiet + DinnerRecommendation -->
          <div class="col-md-8 mb-4">
            <div class="row h-466">
              <div class="col-md-6">
                <div class="h-100">
                  <TodayDiet ref="TodayDiet" />
                </div>
              </div>
              <div class="col-md-6">
                <div class="h-100">
                  <DinnerRecommendation ref="DinnerRecommendation" />
                </div>
              </div>
            </div>
          </div>
          <!-- 1í–‰ 2ì—´: Information -->
          <div class="col-md-4 mb-0">
            <div class="h-320">
              <Information ref="Information" />
            </div>
          </div>
        </div>

        <div class="row">
          <!-- 2í–‰ 1ì—´: MainChart -->
          <div class="col-md-8 mb-4">
            <MainChart ref="MainChart" />
          </div>
          <!-- 2í–‰ 2ì—´: Calendar -->
          <div class="col-md-4">
            <Calendar ref="Calendar" />
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import MainChart from '@/components/mainpage/MainChart.vue'
import Calendar from '@/components/mainpage/Calendar.vue'
import Information from '@/components/mainpage/Information.vue'
import TodayColumn from '@/components/mainpage/TodayColumn.vue'
import TodayDiet from '@/components/mainpage/TodayDiet.vue'
import DinnerRecommendation from '@/components/mainpage/DinnerRecommendation.vue'

import { computed } from 'vue'
import { userAccountStore } from '@/store/account'

// pinia storeì„ ì‚¬ìš©í•˜ê² ë‹¤
const accountStore = userAccountStore()

const username = computed(() => accountStore.username)
const isSurveyed = computed(() => accountStore.isSurveyed)
const isLoggedIn = computed(() => !!username.value)
</script>

<!-- scopedëŠ” ì´ í˜ì´ì§€ì—ì„œë§Œ cssë¥¼ ì„¤ì •í• ë•Œ ì”€ -->
<style scoped>
.hero {
  background: url('https://images.unsplash.com/photo-1551218808-94e220e084d2') no-repeat center
    center;
  background-size: cover;
  color: white;
  height: 100vh;
  display: flex;
  align-items: center;
}

.hero-overlay {
  background-color: rgba(0, 0, 0, 0.5);
  padding: 80px 20px;
  width: 100%;
}

.section-title {
  font-size: 2rem;
  font-weight: 600;
}

.h-466 {
  height: 466px;
}

.h-320 {
  height: 320px;
}

.h-100 {
  height: 100%;
}
</style>
